`import static press.Plugin.*;
`import vo.HaomaVO;
`import vo.PaiduiVO;
`import vo.BackendMerchantInfoVO
`extends base_layout
`set cssAndJs
$addJS("merchant.js", true)
$addCSS("backend.css", true)
`
`set title:i18n("取号啦 - 商家后台管理")

`args HaomaVO haomaVO, BackendMerchantInfoVO bmivo

<!DOCTYPE html>
<html lang="cn">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
</head>

<body id="paiduiPageBody">
    <div class="navbar navbar-fixed-top navbar-inverse" role="navigation">
      <div class="container">
        <div class="collapse navbar-collapse">
          `t merchantMenu(bmivo,"paidui")
        </div><!-- /.nav-collapse -->
      </div><!-- /.container -->
    </div><!-- /.navbar -->

    <div class="container">
      <div class="row row-offcanvas row-offcanvas-right">
        <div class="col-xs-12 col-sm-12">
          <p class="pull-right visible-xs">
            <button type="button" class="btn btn-primary btn-xs" data-toggle="offcanvas">Toggle nav</button>
          </p>
          
          <div style="margin-top: 100px;" class="panel panel-default" id="autoRefreshDiv">
	  					<!-- Default panel contents -->
						  <div class="panel-heading">排队实时情况</div>
		
						  <!-- Table -->
						  <table class="table" >
						    <tr align="center">
							    <td>人桌</td>
							    <td>已取消排队数</td>
							    <td>已过期排队数</td>
							    <td>消费成功数</td>
							    <td>当前最大排队号码</td>
							    <td>即将处理号码</td>
							    <td>消费操作</td>
							    <td>过期操作</td>
							    <td>现场取号</td>
						    </tr>
						    `for(PaiduiVO paiduiVO : haomaVO.paiduiVOList){
						    	<tr align="center">
						    		<td><button type="button" class="btn btn-info col-md-6" style="float: none; width: 50px;">${paiduiVO.numberOfSeat}</button></td>
						    		<td><button type="button" class="btn btn-info col-md-6" style="float: none; width: 50px;">${paiduiVO.canceled}</button></td>
						    		<td><button type="button" class="btn btn-info col-md-6" style="float: none; width: 50px;">${paiduiVO.expired}</button></td>
						    		<td><button type="button" class="btn btn-info col-md-6" style="float: none; width: 50px;">${paiduiVO.finished}</button></td>
						    		<td><button type="button" class="btn btn-warning col-md-6" style="float: none; width: 50px;">${paiduiVO.maxNumber}</button></td>
						    		<td><button type="button" class="btn btn-danger col-md-6" style="float: none; width: 50px;">${paiduiVO.currentNumber}</button></td>
						    		<td><button type="button" class="btn btn-primary col-md-6" style="float: none; width: 50px;" 
						    		`if(paiduiVO.currentNumber == 0 || paiduiVO.currentNumber > paiduiVO.maxNumber){
						    			disabled="disabled"
						    		`}
						    		onclick="Merchant.finishConfirm('${paiduiVO.numberOfSeat}','${paiduiVO.currentNumber}','${haomaVO.merchantId}');">消费</button></td>
						    		<td><button type="button" class="btn btn-primary col-md-6" style="float: none; width: 50px;" 
						    		`if(paiduiVO.currentNumber == 0 || paiduiVO.currentNumber > paiduiVO.maxNumber){
						    			disabled="disabled"
						    		`}
						    		onclick="Merchant.expiredConfirm('${paiduiVO.numberOfSeat}','${paiduiVO.currentNumber}','${haomaVO.merchantId}');">过期</button></td>
						    		<td><button type="button" class="btn btn-primary col-md-6" style="float: none; width: 80px;" 
						    		onclick="Merchant.quhaoOnsiteConfirm('${paiduiVO.numberOfSeat}','${haomaVO.merchantId}');">现场取号</button></td>
						    	</tr>
						    `}
						  </table>
						</div>
          
        </div><!--/span-->
      </div><!--/row-->

	  <!-- footer -->
      `t merchantFoot
	  <!-- footer -->
    </div><!--/.container-->
    
</body>
<script type="text/javascript">
	Merchant.autoRefresh('${haomaVO.merchantId}');
</script>
</html>