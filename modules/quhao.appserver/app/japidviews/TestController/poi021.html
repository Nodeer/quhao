<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>地理编码</title>
<script language="javascript" src="http://webapi.amap.com/maps?v=1.2&key=60d9c5881dbe8dddd3de33aaacac0cbe"></script>
<script language="javascript" src="/public/javascripts/libs/jquery-1.7.js"></script>
<script language="javascript">
var mapObj;
var marker = new Array();
var windowsArr = new Array(); 
function mapInit() { 
    mapObj = new AMap.Map("iCenter");  
}  
function geocoder(distinct) {
    var MGeocoder;
    //加载地理编码插件
    mapObj.plugin(["AMap.Geocoder"], function() {        
        MGeocoder = new AMap.Geocoder({ 
        });
        //返回地理编码结果 
        AMap.event.addListener(MGeocoder, "complete", geocoder_CallBack); 
        //地理编码
        MGeocoder.getLocation("上海市"+distinct); 
    });
}  

//地理编码返回结果展示   
function geocoder_CallBack(data){
    var resultStr="";
    //地理编码结果数组
    var geocode = new Array();
    geocode = data.geocodes;  
    for (var i = 0; i < geocode.length; i++) {
        //拼接输出html
        console.log(geocode[i].location.getLng()+","+geocode[i].location.getLat());
        $("#result").append("坐标:" + geocode[i].location.getLng() + ", " + geocode[i].location.getLat() + "&nbsp;&nbsp;&nbsp;&nbsp;地址:" + geocode[i].formattedAddress + "<br/>");
    }
    
}  

function startgeocoder(){
	var distinct = ["黄浦区","卢湾区","徐汇区","长宁区","静安区","普陀区","闸北区","虹口区","杨浦区","闵行区","宝山区","嘉定区","浦东新区","金山区","松江区","青浦区","南汇区","奉贤区"," 崇明县"];
	for(var i=0;i<distinct.length;i++){
		geocoder(distinct[i]);		
	}
}

</script>
</head>  
<body onload="mapInit();">
    <div id="iCenter" style="display: none;"></div>
    <div class="demo_box"> 
            <input type="button" value="地理编码" onclick="startgeocoder()"/>
        <div id="r_title"><b>地理编码结果:</b></div>
        <div id="result"> </div>
    </div>
</body>  
</html>