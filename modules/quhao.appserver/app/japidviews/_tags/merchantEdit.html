`import vo.BackendMerchantInfoVO 
`args BackendMerchantInfoVO bmivo

<style>
  .ui-autocomplete {
    max-height: 200px;
    overflow-y: auto;
    /* prevent horizontal scrollbar */
    overflow-x: hidden;
  }
  /* IE 6 doesn't support max-height
   * we use height instead, but this forces the menu to always be this tall
   */
  * html .ui-autocomplete {
    height: 200px;
  }
</style>

<form role="form" class="form-horizontal" id="merchantForm" action="/b/w/editMerchant" enctype="multipart/form-data" method="post">
	
	<input type="hidden" id="uid" name="uid" value="${bmivo.aid}" /> 
	<input type="hidden" id="mid" name="mid" value="${bmivo.mid}" />
	
	<div class="form-group">
		<label for="merchantName" class="col-sm-3 control-label"></label>
		<div class="col-xs-7">
			<div class="input-group" style="width: 100%">
				<font style="font-size: large;">商家信息</font>
			  `if(bmivo.merchantExist){
				<button style="float: right;" class="btn btn-primary" data-toggle="modal" data-target="#updateMerchant">编辑商家信息</button>
			  `}
			</div>
		</div>
	</div>
	<hr>
	<div class="form-group">
		<label for="merchantName" class="col-sm-3 control-label">商家名称：</label>
		<div class="col-xs-7">
			<div class="input-group">
			<input class="form-control" onkeyup="Merchant.findMerchant(this,event);" type="text" name="merchantName" id="merchantName" value="${bmivo.name}" placeHolder="商家名称, 输入关键字回车联想" autocomplete="off"
				`if(bmivo.merchantExist){ 
					disabled="disabled" 
				`}
			/>
			<span class="input-group-btn">
		      <button class="btn btn-primary" type="button" onclick="Merchant.search();"
		    	  `if(bmivo.merchantExist){ 
						disabled="disabled" 
				  `}
		      >搜索</button>
		    </span>
		    </div>
		    <p class="help-block" style="color: red;">注意：提交之后商家名称是不能修改的</p>
	    </div>
	</div>
	
	`if(bmivo.merchantExist){
	<div class="form-group">
		<label for="address" class="col-sm-3 control-label">商家ID：</label>
		<div class="col-xs-7">
			<input class="form-control" disabled="disabled" value="${bmivo.mid}" placeHolder="联系方式" />
	    </div>
	</div>
	`}
	
	<div class="form-group">
		<label for="description" class="col-sm-3 control-label">商家描述：</label>
		<div class="col-xs-7">
			<textarea class="form-control" rows="3" id="description" name="description" placeHolder="商家描述" disabled="disabled"></textarea>
	    </div>
	</div>
	
	<div class="form-group">
		<label for="merchantImage" class="col-sm-3 control-label">上传图片（100*60）：</label>
	    <div class="col-xs-7">
	    	<input type="file" id="merchantImage" name="merchantImage" disabled="disabled" />
		    <p class="help-block" style="color: red;">注意：上传的图片将作为展示在APP客户端的商家Logo</p>
	    </div>
	</div>

	
	<div class="form-group">
		<label for="" class="col-sm-3 control-label">展示图片：</label>
		<div class="col-xs-7">
			`for(String srcStr : bmivo.imgSrc){
				<img class="thumbnail" alt="" src="${srcStr}" />
			`}
	    </div>
	</div>


	<div class="form-group">
		<label for="cityCode" class="col-sm-3 control-label">商家所在城市：</label>
		<div class="col-xs-7">
			<select class="form-control" id="cityCode" name="cityCode" disabled="disabled">
			  <option value="">商家所在城市</option>
			  <option value="021">上海</option>
			  <option value="010">北京</option>
			  <option value="020">广州</option>
			  <option value="0755">深圳</option>
			  <option value="028">成都</option>
			  <option value="023">重庆</option>
			  <option value="025">南京</option>
			  <option value="0571">杭州</option>
			  <option value="0757">佛山</option>
			</select>
			<p class="help-block" style="color: red;">注意：请认真核对商家所在城市</p>
	    </div>
	</div>
	<div class="form-group">
		<label for="address" class="col-sm-3 control-label">商家地址：</label>
		<div class="col-xs-7">
			<input class="form-control" disabled="disabled" name="address" id="address" value="${bmivo.address}" placeHolder="商家地址" onblur="getLoc();"/>
			<p class="help-block" style="color: red;">注意：请认真填写商家地址，错误的地址将导致消费者无法到贵店消费</p>
			<input type="hidden" name="x" id="x" value="${bmivo.x}" />
			<input type="hidden" name="y" id="y" value="${bmivo.y}" />
	    </div>
	</div>
	<div class="form-group">
		<label for="address" class="col-sm-3 control-label">联系方式：</label>
		<div class="col-xs-7">
			<input class="form-control" disabled="disabled" name="tel" id="tel" value="${bmivo.telephone}" placeHolder="联系方式" />
			<p class="help-block" style="color: red;">注意：请认真填写联系方式，错误的联系方式导致消费者无法联系商家</p>
	    </div>
	</div>
	<div class="form-group">
		<label for="cateType" class="col-sm-3 control-label">商家风味：</label>
		<input type="hidden" id="cateName" name="cateName" value="" />
		<input type="hidden" id="cateName1" name="cateName1" value="" />
		<div class="col-xs-4">
			<select disabled="disabled" class="form-control" id="cateType" name="cateType" onchange="javascript:$('#cateName').val($(this).find('option:selected').text())">
				<option class="form-control" value="">请选择主要风味（必选）</option>
				<option class="form-control" value="benbangcai">本帮菜</option>
				<option class="form-control" value="chuancai">川菜</option>
				<option class="form-control" value="dongnanyacai">东南亚菜</option>
				<option class="form-control" value="haixian">海鲜</option>
				<option class="form-control" value="huoguoliaoli">火锅料理</option>
				<option class="form-control" value="huoguo">火锅</option>
				<option class="form-control" value="ribenliaoli">日本料理</option>
				<option class="form-control" value="shaokao">烧烤</option>
				<option class="form-control" value="xiangcai">湘菜</option>
				<option class="form-control" value="xican">西餐</option>
				<option class="form-control" value="xinjiangqingzhen">新疆清真</option>
				<option class="form-control" value="yuecaiguan">粤菜馆</option>
				<option class="form-control" value="zhongcanxican">中餐西餐</option>
				<option class="form-control" value="zizhucan">自助餐</option>
			</select>
	    </div>
		<div class="col-xs-3">
			<select disabled="disabled" class="form-control" id="cateType1" name="cateType1" onchange="javascript:$('#cateName1').val($(this).find('option:selected').text())">
				<option class="form-control" value="">次要风味（可选）</option>
				<option class="form-control" value="benbangcai">本帮菜</option>
				<option class="form-control" value="chuancai">川菜</option>
				<option class="form-control" value="dongnanyacai">东南亚菜</option>
				<option class="form-control" value="haixian">海鲜</option>
				<option class="form-control" value="huoguoliaoli">火锅料理</option>
				<option class="form-control" value="huoguo">火锅</option>
				<option class="form-control" value="ribenliaoli">日本料理</option>
				<option class="form-control" value="shaokao">烧烤</option>
				<option class="form-control" value="xiangcai">湘菜</option>
				<option class="form-control" value="xican">西餐</option>
				<option class="form-control" value="xinjiangqingzhen">新疆清真</option>
				<option class="form-control" value="yuecaiguan">粤菜馆</option>
				<option class="form-control" value="zhongcanxican">中餐西餐</option>
				<option class="form-control" value="zizhucan">自助餐</option>
			</select>
	    </div>
	</div>
	
	<div class="form-group">
		<label for="openTime" class="col-sm-3 control-label">营业时间（开始）：</label>
		<div class="col-xs-7">
			<select disabled="disabled" class="form-control" id="openTime" name="openTime" >
				<option class="form-control" value="">请选择营业时间（开始）</option>
				`for(int i=6; i < 24; i++){
					<option class="form-control" value="${i}:00">$i:00</option>
				`}
			</select>
	    </div>
	</div>
	<div class="form-group">
		<label for="closeTime" class="col-sm-3 control-label">营业时间（结束）：</label>
		<div class="col-xs-7">
			<select disabled="disabled" class="form-control" id="closeTime" name="closeTime" >
				<option class="form-control" value="">请选择营业时间（结束）</option>
				`for(int i=6; i < 24; i++){
					<option class="form-control" value="${i}:00">$i:00</option>
				`}
			</select>
	    </div>
	</div>

	<div class="form-group">
		<label for="closeTime" class="col-sm-3 control-label">设置桌位类型：</label>
		<div class="col-xs-7">
		<p class="help-block">桌位类型指贵店包括多少人座位类型，比如有4人桌，6人桌，8人桌，则在下面的选择项上打钩即可。</p>
			<p class="help-block" style="color: red;">注意：更改桌位类型将清空当前排队号，请谨慎操作！</p>
			`for(int i = 1; i <= 20; i++){
				<div style="width: 90px; float: left;">
					<input disabled="disabled" id="seat${i}" name="seatType" value="${i}" type="checkbox"><font class="rmargin20 lmargin5" >${i}人桌</font>
				</div>
			`}
	    </div>
	</div>

	<div id="btnupdate" class="form-group" style="display: none;">
 		<div class="col-sm-offset-3 col-sm-10">
   			<button type="button" id="resetbtn" class="btn btn-primary" onclick="Merchant.reset();">重&nbsp;&nbsp;&nbsp;&nbsp;置</button>
   			<button type="button" id="updatebtn" class="btn btn-primary" style="margin-left: 70px;" onclick="Merchant.update();">提&nbsp;&nbsp;&nbsp;&nbsp;交</button>
 		</div>
	</div>
</form>

<div id="iCenter" style="display: none;"></div>

`if(bmivo.merchantExist){
	<script type="text/javascript">
		$("#merchantName").val("${bmivo.name}");
		$("#cateType").val("${bmivo.cateType}");
		$("#cateType1").val("${bmivo.cateType1}");
		$("#openTime").val("${bmivo.openTime}");
		$("#closeTime").val("${bmivo.closeTime}");
		$("#description").val("${bmivo.description}");
		$("#cityCode").val("${bmivo.cityCode}");
	</script>
`}

`if(bmivo.seatType != null){
	`for(String s : bmivo.seatType){
		<script type="text/javascript">
			$("#seat"+${s}).attr("checked","true");
		</script>
	`}
`}

<script language="javascript" src="http://webapi.amap.com/maps?v=1.2&key=60d9c5881dbe8dddd3de33aaacac0cbe"></script>

<script language="javascript">
var mapObj;
var marker = new Array();
var windowsArr = new Array(); 
//function mapInit() { 
    mapObj = new AMap.Map("iCenter");  
//}  
function geocoder() {
    var MGeocoder;
    //加载地理编码插件
    mapObj.plugin(["AMap.Geocoder"], function() {        
        MGeocoder = new AMap.Geocoder({ 
        });
        //返回地理编码结果 
        AMap.event.addListener(MGeocoder, "complete", geocoder_CallBack); 
        //地理编码
        var city = $("#cityCode").find("option:selected").text();
        var address = $("#address").val();
        
        console.log(city+"市"+address);
        
        MGeocoder.getLocation(city+"市"+address); 
    });
}  

//地理编码返回结果展示   
function geocoder_CallBack(data){
    var resultStr="";
    //地理编码结果数组
    var geocode = new Array();
    geocode = data.geocodes;  
    for (var i = 0; i < geocode.length; i++) {
    	$("#x").val(geocode[i].location.getLat());
    	$("#y").val(geocode[i].location.getLng());
        console.log(geocode[i].location.getLat()+","+geocode[i].location.getLng());
        break;
    }
    
}  
</script>
<script type="text/javascript">

function getLoc(){
	console.log("start to get x,y");
	geocoder();
}
<!--

//-->
</script>
